<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagos Recibidos</title>
  <link rel="stylesheet" href='/stylesheets/style.css'>
  <link rel="stylesheet" href='/stylesheets/payments_list.css'>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>

  <%- include('partials/navbar') %>
  
  <h1>Pagos Recibidos</h1>

<% if (payments.length > 0) { %>
  <div class="table-container">
    <table class="payments-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Plan</th>
          <th>Email</th>
          <th>Titular</th>
          <th>Monto</th>
          <th>Moneda</th>
          <th>Fecha</th>
          <th>IP</th>
        </tr>
      </thead>
      <tbody>
        <% payments.forEach(payment => { %>
          <tr>
            <td data-label="ID"><%= payment.id %></td>
            <td data-label="Plan"><%= payment.plan %></td>
            <td data-label="Email"><%= payment.email %></td>
            <td data-label="Titular"><%= payment.cardholder %></td>
            <td data-label="Monto" class="amount-cell"><%= payment.amount.toFixed(2) %></td>
            <td data-label="Moneda"><%= payment.currency %></td>
            <td data-label="Fecha" class="date-cell"><%= new Date(payment.created_at).toLocaleString('es-ES') %></td>
            <td data-label="IP" class="ip-cell"><%= payment.ip_address %></td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  </div>
<% } else { %>
  <div class="no-payments">
    <p>No hay pagos registrados a√∫n.</p>
  </div>
<% } %>

  <%- include('partials/footer') %>

  <script src='/javascripts/script'></script>
</body>
</html>